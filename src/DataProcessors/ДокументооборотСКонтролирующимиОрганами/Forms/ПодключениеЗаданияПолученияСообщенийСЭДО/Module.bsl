
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.СчетчикВсего > 1 Тогда
		ВсегоСообщений = ПолучитьСклоненияСтрокиПоЧислу("сообщение", Параметры.СчетчикВсего, "",
				"ЧС=Количественное", "ПД=Родительный");
		Шаблон = НСтр("ru='%1 из %2'");
		КоличествоСообщений = СтрШаблон(Шаблон, Параметры.СчетчикОшибок, ВсегоСообщений[0]);
		ТекстСообщения = НСтр("ru='сообщения'");
		Элементы.ЧтоДелать2.Заголовок = СтрЗаменить(Элементы.ЧтоДелать2.Заголовок,
			"%сообщения%", ТекстСообщения);
		Элементы.ФормаПодключитьФоновоеЗадание.Заголовок = СтрЗаменить(Элементы.ФормаПодключитьФоновоеЗадание.Заголовок,
			"%сообщения%", ТекстСообщения);
	Иначе
		ТекстСообщения = НСтр("ru='сообщение'");
		Элементы.ЧтоДелать2.Заголовок = СтрЗаменить(Элементы.ЧтоДелать2.Заголовок,
			"%сообщения%", ТекстСообщения);
		Элементы.ФормаПодключитьФоновоеЗадание.Заголовок = СтрЗаменить(Элементы.ФормаПодключитьФоновоеЗадание.Заголовок,
			"%сообщения%", ТекстСообщения);
		КоличествоСообщений = НСтр("ru='1 сообщение'");
	КонецЕсли;
	
	ИнформационнаяБазаФайловая = ОнлайнСервисыРегламентированнойОтчетностиВызовСервера.ИнформационнаяБазаФайловая();
	Если ИнформационнаяБазаФайловая Тогда
		ИформацияДляФайловойбазы = НСтр("ru=', однако вам необходимо оставить программу открытой'");
		Элементы.ЧтоДелать2.Заголовок = СтрЗаменить(Элементы.ЧтоДелать2.Заголовок,
			"%ИформацияДляФайловойбазы%", ИформацияДляФайловойбазы);
	Иначе
		ИформацияДляФайловойбазы = "";
		Элементы.ЧтоДелать2.Заголовок = СтрЗаменить(Элементы.ЧтоДелать2.Заголовок,
			"%ИформацияДляФайловойбазы%", ИформацияДляФайловойбазы);
	КонецЕсли;
	
	ЧтоДелатьЗаголовок = Элементы.ЧтоДелать.Заголовок;
	ЧтоДелатьЗаголовок = СтрЗаменить(ЧтоДелатьЗаголовок, "%1", КоличествоСообщений);
	Элементы.ЧтоДелать.Заголовок = СтроковыеФункции.ФорматированнаяСтрока("<b>" + ЧтоДелатьЗаголовок + "</b>");
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ПодключитьРегламентноеЗадание(Команда)
	
	ЭтотОбъект.Закрыть(Истина);
	
КонецПроцедуры

#КонецОбласти