
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Пропускаем инициализацию, чтобы гарантировать получение формы при передаче параметра "АвтоТест".
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	Параметры.Свойство("Организация", Организация);
	Параметры.Свойство("ВладелецЭЦПИНН", ВладелецЭЦПИНН);
	Параметры.Свойство("ВладелецЭЦПФИО", ВладелецЭЦПФИО);
	Параметры.Свойство("ВладелецЭЦПСНИЛС", ВладелецЭЦПСНИЛС);
	
	УправлениеФормой(Параметры);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовТаблицыФормы

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура УправлениеФормой(Параметры)
	
	ИзменитьОформлениеИННОрганизации(Параметры);
	ИзменитьОформлениеСНИЛС();
	ИзменитьОформлениеПояснения();
	ИзменитьОформлениеСсылкиВсеСертификаты();
	
КонецПроцедуры

&НаСервере
Процедура ИзменитьОформлениеСсылкиВсеСертификаты()
	
	Элементы.ВсеСертификаты.Заголовок = ОбработкаЗаявленийАбонентаКлиентСервер.СсылкаНаВсеСертификаты();
	
КонецПроцедуры

&НаСервере
Процедура ИзменитьОформлениеПояснения()
	
	СсылкаНаОрганизацию = ОбработкаЗаявленийАбонентаКлиентСервер.СсылкаНаОрганизацию(Организация);
	
	Элементы.Пояснение.Заголовок = Новый ФорматированнаяСтрока(
		НСтр("ru = 'Не найдено ни одного сертификата организации '"),
		СсылкаНаОрганизацию,
		НСтр("ru = ' по данным:'"));
	
КонецПроцедуры

&НаСервере
Процедура ИзменитьОформлениеСНИЛС()
	
	ВладелецЭЦПСНИЛС = ОбработкаЗаявленийАбонентаКлиентСервер.СНИЛСБезРазделителей(ВладелецЭЦПСНИЛС);
	
КонецПроцедуры

&НаСервере
Процедура ИзменитьОформлениеИННОрганизации(Параметры)
	
	ЕстьИНН = Параметры.Свойство("ИНН", ИНН);
	Элементы.ИНН.Видимость = ЕстьИНН;
	
КонецПроцедуры


#КонецОбласти