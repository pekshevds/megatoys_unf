#Область ОбработчикиСобытий

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	Если Не ЭтоЗаказНаПереработку(ПараметрКоманды) Тогда
		ВызватьИсключение НСтр("ru = 'Передача в переработку возможна только по заказу на переработку.'");
	КонецЕсли;
	СтруктураЗаполнения = Новый Структура("Основание", ПараметрКоманды);
	ОткрытьФорму("Документ.РасходнаяНакладная.ФормаОбъекта", СтруктураЗаполнения);
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

// Это заказ на переработку.
// 
// Параметры:
//  ДокументСсылкаЗаказПоставщику - ДокументСсылка.ЗаказПоставщику
// 
// Возвращаемое значение:
//  Булево - Это заказ на переработку
&НаСервере
Функция ЭтоЗаказНаПереработку(Знач ДокументСсылкаЗаказПоставщику)
	ВидОперацииЗаказаПоставщику = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ДокументСсылкаЗаказПоставщику, "ВидОперации");
	Возврат ВидОперацииЗаказаПоставщику = Перечисления.ВидыОперацийЗаказПоставщику.ЗаказНаПереработку;
КонецФункции

#КонецОбласти