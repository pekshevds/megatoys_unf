
#Область ПрограммныйИнтерфейс

// См. ОбновлениеИнформационнойБазыУНФ.ОбновлениеРозницыДоУНФ
Процедура ОбновлениеРозницыДоУНФ() Экспорт
	
	УстановитьКонстантыОбновленияРозницыДоУНФ();
	ЗаполнитьДанныеПриПереходеСРозницы();
	
КонецПроцедуры

// Процедура выполняет первоначальное заполнение данных подсистемы и включение функциональности при первом запуске приложения
//
Процедура ПриПервомЗапуске() Экспорт
	
	УстановитьКонстантыНачальногоЗаполнения();
	ПервоначальноеЗаполнениеОбъектовПодсистемы();
	
КонецПроцедуры

// Процедура выполняет первоначальное заполнение данных подсистемы
//
Процедура ПервоначальноеЗаполнениеОбъектовПодсистемы() Экспорт
	
	Справочники.ПравилаРабочегоПроцесса.ЗаполнитьПоставляемыеПравила();
	ШаблоныПечатиОфисныхДокументов.СоздатьПредопределенныеШаблоныКоммерческогоПредложения();
	ШаблоныПечатиОфисныхДокументов.СоздатьПредопределенныеШаблоныДоговоровКонтрагентов();
	РегистрыСведений.СоответствиеПолейЛидаИКонтрагента.ЗаполнитьПоставляемыеСоответствияРеквизитовЛидаИКонтрагента();
	Документы.ЗаказПокупателя.СоздатьПоставляемыеШаблоныСообщений();
	Справочники.ВидыЗаказовПокупателей.ЗаполнитьОсновнойВидЗаказа();
	Справочники.ВидыЗаказНарядов.ЗаполнитьОсновнойВидЗаказа();
	
КонецПроцедуры

// Процедура выполняет первоначальное включение функциональности подсистемы
//
Процедура УстановитьКонстантыНачальногоЗаполнения() Экспорт
	
	РежимЗапускаУНФ 			= Константы.ТекущийРежимЗапускаУНФ.Получить();
	ЭтоРозница 					= ВозможностиПриложения.ЭтоРозница();
	ЭтоУНФ 						= ВозможностиПриложения.ЭтоУНФ();
	ЭтоНастольноеПриложениеУНФ 	= ЭтоУНФ И РежимЗапускаУНФ = Перечисления.РежимыЗапускаУНФ.НастольноеПриложение;
	ОснованиеДоговорКонтрагента = Перечисления.ОснованиеПечатиСпособНачальногоЗаполнение.ДоговорКонтрагента;
	
	Если ЭтоУНФ Тогда
		
		Константы.ИспользоватьШаблоныСообщений.Установить(Истина);
		Константы.ИспользоватьНапоминанияПользователя.Установить(Истина);
		Константы.ФункциональнаяОпцияКонтрольДоговоров.Установить(Перечисления.ВидыКонтроляДоговоровПриПроведении.НеПроводить);
		Константы.ИспользоватьПодсистемуCRM.Установить(Истина);
		Константы.ИспользоватьЗадачиСотрудников.Установить(Истина);
		Константы.ИспользоватьИсточникиПривлечения.Установить(Истина);
		Константы.ИспользоватьЗаданияНаРаботу.Установить(Истина);
		Константы.ИспользоватьЗагрузкуЭлектроннойПочты.Установить(Истина);
		Константы.ИспользоватьОбменСGoogleCalendar.Установить(Истина);
		Константы.ИспользоватьАссистентаУправления.Установить(Истина);
		Константы.ИспользоватьШаблоныПечатиОфисныхДокументов.Установить(Истина);
		Константы.ОснованиеПечатиЗаказПокупателя.Установить(ОснованиеДоговорКонтрагента);
		Константы.ОснованиеПечатиСчетНаОплату.Установить(ОснованиеДоговорКонтрагента);
		
		Константы.ПереносАдресатовЗавершен.Установить(Истина);
		Константы.ПереносКонтактовВАдресатыЗавершен.Установить(Истина);
		Константы.ПереносКонтактовЛидовВАдресатыЗавершен.Установить(Истина);
		Константы.ПереносКонтрагентовВАдресатыЗавершен.Установить(Истина);
		Константы.ПереносЛидовВАдресатыЗавершен.Установить(Истина);
		Константы.ПереносФизическихЛицВАдресатыЗавершен.Установить(Истина);
		
		// включение констант используемых только в настольном приложении
		Если ЭтоНастольноеПриложениеУНФ Тогда
			Константы.ИспользоватьДоговорыКонтрагентов.Установить(Истина);
			Константы.ИспользоватьПрисоединенныеФайлы.Установить(Истина);
			Константы.ОтображатьПереходКСпискуПокупателей.Установить(Истина);
			Константы.ИспользоватьКалендариСотрудников.Установить(Истина);
			Константы.ИспользоватьСобытия.Установить(Истина);
		КонецЕсли;
		
	КонецЕсли;
	
	Если ЭтоРозница Тогда
		Константы.ИспользоватьШаблоныСообщений.Установить(Истина);
		Константы.ИспользоватьНапоминанияПользователя.Установить(Истина);
		Константы.ФункциональнаяОпцияКонтрольДоговоров.Установить(Перечисления.ВидыКонтроляДоговоровПриПроведении.НеКонтролировать);
		Константы.ИспользоватьДоговорыКонтрагентов.Установить(Истина);
		Константы.ИспользоватьПрисоединенныеФайлы.Установить(Истина);
		Константы.ОтображатьПереходКСпискуПокупателей.Установить(Истина);
		Константы.ОснованиеПечатиЗаказПокупателя.Установить(ОснованиеДоговорКонтрагента);
		Константы.ОснованиеПечатиСчетНаОплату.Установить(ОснованиеДоговорКонтрагента);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Процедура УстановитьКонстантыОбновленияРозницыДоУНФ()
	
	Константы.ИспользоватьПодсистемуCRM.Установить(Истина);
	Константы.ИспользоватьЗадачиСотрудников.Установить(Истина);
	Константы.ИспользоватьИсточникиПривлечения.Установить(Истина);
	Константы.ИспользоватьЗаданияНаРаботу.Установить(Истина);
	Константы.ИспользоватьЗагрузкуЭлектроннойПочты.Установить(Истина);
	Константы.ИспользоватьОбменСGoogleCalendar.Установить(Истина);
	Константы.ИспользоватьАссистентаУправления.Установить(Истина);
	Константы.ИспользоватьШаблоныПечатиОфисныхДокументов.Установить(Истина);
	Константы.ИспользоватьСобытия.Установить(Истина);
	Константы.ИспользоватьКалендариСотрудников.Установить(Истина);
	
КонецПроцедуры

Процедура ЗаполнитьДанныеПриПереходеСРозницы()
	Возврат;
КонецПроцедуры

#КонецОбласти