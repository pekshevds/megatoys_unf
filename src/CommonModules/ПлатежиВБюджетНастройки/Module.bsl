
#Область ПрограммныйИнтерфейс

// Возвращает правила заполнения реквизитов платежа для налога.
//
// Параметры:
//  Налог	 - СправочникСсылка.ВидыНалогов - Налог, для которого нужно определить правила.
// 
// Возвращаемое значение:
//   - Структура - Правила заполнения. См. НовыйПравилаЗаполненияРеквизитовПлатежа()
//
Функция ПравилаЗаполненияРеквизитовПлатежа(Налог) Экспорт
	
	Правила = НовыйПравилаЗаполненияРеквизитовПлатежа();
	
	Если Не ЗначениеЗаполнено(Налог) Тогда
		Возврат Правила;
	КонецЕсли;
	
	ВидНалога = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Налог, "ВидНалога");
	
	Если ВидНалога = Перечисления.ВидыНалогов.НалогНаПрофессиональныйДоход Тогда
		// Для налога на профессиональный доход получать налоговый орган не требуется.
		// Оплата выполняется не по месту нахождения ИП, а в тот налоговый орган, который указан в уведомлении об уплате налога.
		// Поэтому пользователь указывает налоговую самостоятельно.
		Правила.ЗаполнятьПолучателя = Ложь;
		
		// Для налога на профессиональный доход ОКТМО указывается не по месту регистрации ИП,
		// а ОКТМО региона, в котором ИП зарегистрирован как самозанятый.
		// Поэтому пользователь указывает ОКТМО самостоятельно.
		Правила.ЗаполнятьКодТерриторииПоРегистрации = Ложь;
		Правила.СохранятьКодТерриторииПриЗаписи = Истина;
		
	ИначеЕсли ВидНалога = Перечисления.ВидыНалогов.ЕдиныйНалоговыйПлатеж Тогда
		
		Правила.СохранятьПолучателя = Ложь;
		
	ИначеЕсли ВидНалога = Перечисления.ВидыНалогов.ПСН_ГородскойОкруг
		Или ВидНалога = Перечисления.ВидыНалогов.ПСН_МуниципальныйРайон
		Или ВидНалога = Перечисления.ВидыНалогов.ПСН_ГородФедеральногоЗначения
		Или ВидНалога = Перечисления.ВидыНалогов.ПСН_ГородскойОкругСВнутригородскимДелением
		Или ВидНалога = Перечисления.ВидыНалогов.ПСН_ВнутригородскойРайон Тогда
		
		Правила.СохранятьКодТерриторииПриЗаписи = Истина;
		
	КонецЕсли;
	
	Возврат Правила;
	
КонецФункции

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Функция НовыйПравилаЗаполненияРеквизитовПлатежа()
	
	Правила = Новый Структура;
	// Определяет, нужно ли заполнять автоматически данные получателя по данными регистрации.
	// Как правило, налог уплачивается в ту налоговую, в которой организация или ИП зарегистрированы.
	// В этом случае нужно указывать ЗаполнятьПолучателя = Истина и при заполнении платежного поручения
	// будет указана налоговая, в котором организация зарегистрирована.
	// Но для некоторых налогов, например, НПД, налог нужно уплачивать не по месту нахождения организации,
	// а по данным уведомления по уплате налога из налоговой. В этом случае автоматически заполнять получателя
	// не нужно, пользователь сам укажет нужные значения.
	Правила.Вставить("ЗаполнятьПолучателя", Истина);
	Правила.Вставить("СохранятьПолучателя", Истина);
	
	// Определяет, нужно ли заполнять автоматически код территории (ОКТМО) по данным регистрации.
	// Для большинства налогов код территории (ОКТМО) определяется регистрацией.
	// Но для некоторых налогов, например, НПД, нужно подставлять код территории, который указан 
	// в уведомлении налоговой об уплате налога и он не соответствует коду территории регистрации.
	// Для таких налогов нужно указать ЗаполнятьКодТерриторииПоРегистрации = Ложь и пользователь укажет эти
	// данные самостоятельно.
	Правила.Вставить("ЗаполнятьКодТерриторииПоРегистрации", Истина);
	
	// Определяет, нужно ли сохранять при записи банковских документов код терртории (ОКТМО),
	// если пользователь его изменил.
	// Как правило, код территории (ОКТМО) всегда определяется из регистрации и эти изменения сохранять не нужно,
	// но для некоторых налогов, например, НДП, код территории заполняется вручную и его нужно сохранить.
	Правила.Вставить("СохранятьКодТерриторииПриЗаписи", Ложь);
	
	Возврат Правила;
	
КонецФункции

#КонецОбласти

