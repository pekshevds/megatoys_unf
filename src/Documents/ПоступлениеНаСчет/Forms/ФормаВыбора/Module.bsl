#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("ВыборНеПробитогоПлатежаНаОснованииЗаказа") Тогда
		
		ДоступныеОрганизации = Неопределено;
		Если Параметры.Свойство("ДоступныеОрганизации", ДоступныеОрганизации) Тогда
			ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораДинамическогоСписка(
				Список,
				"Организация",
				ДоступныеОрганизации,
				ВидСравненияКомпоновкиДанных.ВСписке);
		КонецЕсли;
		
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораДинамическогоСписка(
			Список,
			"ДокументОснование.СостояниеЗаказа",
			Справочники.СостоянияЗаказовПокупателей.Завершен,
			ВидСравненияКомпоновкиДанных.НеРавно);
			
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораДинамическогоСписка(
			Список,
			"ДокументОснование.Проведен",
			Истина,
			ВидСравненияКомпоновкиДанных.Равно);
			
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораДинамическогоСписка(
			Список,
			"ДокументОснование.ВидОперации",
			Перечисления.ВидыОперацийЗаказПокупателя.ЗаказНаПродажу,
			ВидСравненияКомпоновкиДанных.Равно);
			
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораДинамическогоСписка(
			Список,
			"ВидОперации",
			Перечисления.ВидыОперацийПоступлениеНаСчет.ОтПокупателя,
			ВидСравненияКомпоновкиДанных.Равно); 
			
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораДинамическогоСписка(
			Список,
			"НомерЧекаККМ",
			0,
			ВидСравненияКомпоновкиДанных.Равно);
			
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораДинамическогоСписка(
			Список,
			"Проведен",
			Истина,
			ВидСравненияКомпоновкиДанных.Равно);
			
		Элементы.Список.ТолькоПросмотр = Истина;
		Элементы.ФормаСоздатьНаОсновании.Видимость = Ложь;
		
	КонецЕсли;
	
	ДинамическиеСпискиУНФ.ОтображатьТолькоВремяДляТекущейДаты(Список);
	
КонецПроцедуры

#КонецОбласти
