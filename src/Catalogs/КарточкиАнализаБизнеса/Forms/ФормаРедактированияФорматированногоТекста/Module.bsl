#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АдресТекста") И Параметры.Свойство("ИмяРеквизитаФормы") Тогда
		
		ИмяРеквизитаФормы =   Параметры.ИмяРеквизитаФормы;
		ТекстРедактирования = ПолучитьИзВременногоХранилища(Параметры.АдресТекста);
		
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПоКнопкеОк(Команда)
	Модифицированность = Ложь;

	ПараметрыЗакрытия = Новый Структура;
	ПараметрыЗакрытия.Вставить("ИмяРеквизитаФормы", ИмяРеквизитаФормы);
	ПараметрыЗакрытия.Вставить("АдресТекста", ПоместитьВоВременноеХранилище(ТекстРедактирования, Новый УникальныйИдентификатор));
	
	Закрыть(ПараметрыЗакрытия);
КонецПроцедуры

&НаКлиенте
Процедура ТекстРедактированияПриИзменении(Элемент)
	Модифицированность = Истина;
КонецПроцедуры

&НаКлиенте
Процедура ВопросОПереносеИзмененийЗавешение( Результат, ДополнительныеПараметры ) Экспорт
	Если Результат = КодВозвратаДиалога.Да Тогда
		ПоКнопкеОк( Неопределено );
	ИначеЕсли Результат = КодВозвратаДиалога.Нет Тогда
		Модифицированность = Ложь;
		Закрыть(  Неопределено );
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытием(Отказ, ЗавершениеРаботы, ТекстПредупреждения, СтандартнаяОбработка)
	Если Модифицированность = Истина Тогда
		Оповещение = Новый ОписаниеОповещения( "ВопросОПереносеИзмененийЗавешение", ЭтотОбъект );
		ПоказатьВопрос( Оповещение, "Применить изменения?", РежимДиалогаВопрос.ДаНетОтмена );
		Отказ = Истина;
	КонецЕсли;
КонецПроцедуры

#КонецОбласти