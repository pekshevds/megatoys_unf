
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Если Не Параметры.Свойство("АдресНастроекОтбора", АдресНастроекОтбора)
		И Не ЗначениеЗаполнено(Объект.Ссылка) Тогда
		ВызватьИсключение НСтр("ru = 'Справочник создается из обработке расчет потребностей'");
	КонецЕсли;

	Элементы.ДекорацияИнформация.Видимость = ЗначениеЗаполнено(Объект.Ссылка) И Не ЗначениеЗаполнено(АдресНастроекОтбора);
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаНавигационнойСсылки(НавигационнаяСсылкаФорматированнойСтроки, СтандартнаяОбработка)
	
	Если НавигационнаяСсылкаФорматированнойСтроки = "ОткрытьРасчетПотребностей" Тогда

		СтандартнаяОбработка = Ложь;
		ОткрытьФорму(
			"Обработка.РасчетПотребностей.Форма", 
			Новый Структура("СпособПополнения, ВариантРасчетаПотребностей", Объект.СпособПополнения, Объект.Ссылка));
		
	КонецЕсли;	
	
КонецПроцедуры

&НаСервере
Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
	
	Если ЗначениеЗаполнено(АдресНастроекОтбора) Тогда
		ТекущийОбъект.ДополнительныеСвойства.Вставить("АдресНастроекОтбора", АдресНастроекОтбора)
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПослеЗаписи(ПараметрыЗаписи)
	
	Оповестить("ЗаписанВариантРасчетаПотребностей", Объект.Ссылка);
	
КонецПроцедуры

#КонецОбласти
