
#Область ОбработчикиСобытий

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	ИмяФормы = ПараметрыВыполненияКоманды.Источник.ИмяФормы;
	
	ДополнительныеПараметры = Новый Структура;
	ДополнительныеПараметры.Вставить("Источник", ПараметрыВыполненияКоманды.Источник);
	ДополнительныеПараметры.Вставить("ЭтоФормаНастройки", СтрНайти(ИмяФормы, "ФормаСписка") = 0);
	
	ОписаниеОповещения = Новый ОписаниеОповещения("ФормаВыполнениеОбменаЗавершение", ЭтотОбъект);
	
	ВыполнятьПолнуюВыгрузкуПринудительно =
	ИнтеграцияСИнтернетМагазиномВызовСервера.ЗначениеРеквизитаОбъекта(ПараметрКоманды,
	"ВыполнятьПолнуюВыгрузкуПринудительно");
	
	ПараметрыФормы = Новый Структура;
	ПараметрыФормы.Вставить("НастройкаИнтеграции", ПараметрКоманды);
	ПараметрыФормы.Вставить("ВыгружатьТолькоИзменения", НЕ ВыполнятьПолнуюВыгрузкуПринудительно);
	
	ОткрытьФорму("Справочник.НастройкиИнтеграцииСИнтернетМагазином.Форма.ФормаВыполнениеОбмена",
	ПараметрыФормы,
	ПараметрыВыполненияКоманды.Источник,
	ПараметрыВыполненияКоманды.Уникальность,
	ПараметрыВыполненияКоманды.Окно,
	ПараметрыВыполненияКоманды.НавигационнаяСсылка,
	ОписаниеОповещения
	);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ФормаВыполнениеОбменаЗавершение(Результат, ДополнительныеПараметры) Экспорт
	
	Оповестить("ОбновитьИнтеграцияСИнтернетМагазином");
	
КонецПроцедуры

#КонецОбласти

