
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Элементы.ГруппаОграничениеОстатковДетали.Видимость = Запись.Используется;
	
	ЗаполнитьТипОбластиДействия();
	
КонецПроцедуры

&НаКлиенте
Процедура ПослеЗаписи(ПараметрыЗаписи)
	Оповестить("ИзмененоОграничениеВыгрузкиОстатковМаркетплейсов");
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура ОбластьДействияПриИзменении(Элемент)
	
	ЗаполнитьТипОбластиДействия();
	
КонецПроцедуры

&НаКлиенте
Процедура ИспользуетсяПриИзменении(Элемент)
	
	Элементы.ГруппаОграничениеОстатковДетали.Видимость = Запись.Используется;
	
	УстановитьПредставлениеЗаписи();
	
КонецПроцедуры

&НаКлиенте
Процедура ПроцентОстаткаПриИзменении(Элемент)
	
	УстановитьПредставлениеЗаписи();       
	
КонецПроцедуры

&НаКлиенте
Процедура СтраховойЗапасПриИзменении(Элемент)
	
	УстановитьПредставлениеЗаписи();
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура УстановитьПредставлениеЗаписи()
	
	РегистрыСведений.ОграниченияВыгрузкиОстатковМаркетплейсов.УстановитьПредставлениеЗаписи(Запись);
	
КонецПроцедуры

&НаСервере
Процедура ЗаполнитьТипОбластиДействия()
	
	Если НЕ ЗначениеЗаполнено(Запись.ОбластьДействия) Тогда
		ТипОбластиДействия = "";
	ИначеЕсли ТипЗнч(Запись.ОбластьДействия) = Тип("СправочникСсылка.Номенклатура")
		И НЕ ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Запись.ОбластьДействия, "ЭтоГруппа") Тогда
		ТипОбластиДействия = "(" + НСтр("ru = 'Номенклатура'") + ")";
	ИначеЕсли ТипЗнч(Запись.ОбластьДействия) = Тип("СправочникСсылка.Номенклатура") Тогда
		ТипОбластиДействия = "(" + НСтр("ru = 'Группа номенклатуры'") + ")";
	ИначеЕсли ТипЗнч(Запись.ОбластьДействия) = Тип("СправочникСсылка.КатегорииНоменклатуры") Тогда
		ТипОбластиДействия = "(" + НСтр("ru = 'Категория номенклатуры'") + ")";
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти
